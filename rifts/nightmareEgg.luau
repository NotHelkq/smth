local httpRequest =
    (syn and syn.request) or
    (http and http.request) or
    (http_request) or
    (fluxus and fluxus.request) or
    (request)

if not httpRequest then
    warn("âš ï¸ No supported HTTP request method found!")
    return
end

local player = game.Players.LocalPlayer
local httpService = game:GetService("HttpService")

local islandName = " Nightmare Egg"
local rift = workspace.Rendered.Rifts:FindFirstChild("nightmare-egg")
local luck = rift.Display.SurfaceGui.Icon.Luck.Text
local timer = rift.Display.SurfaceGui.Timer.Text
local title = luck .. islandName

local webhooklink = "Nothing"
if luck == "x5" then
    webhooklink = getgenv().Config.x5RiftWebhookLink
elseif luck == "x10" then
    webhooklink = getgenv().Config.x10RiftWebhookLink
elseif luck == "x25" then 
    webhooklink = getgenv().Config.x25RiftWebhookLink
end

local lTitle = "0"
if luck == "x5" then
    lTitle = "1364579049049030727> | <@&1364675294014734439"
elseif luck == "x10" then
    lTitle = "1364579027670667417> | <@&1364675216537550918"
elseif luck == "x25" then
    lTitle = "1364578986390454363> | <@&1364675128818139146"
end

local function sendWebhook()
    local pos = rift.EggPlatformSpawn.WorldPivot.Position
    local rPos = Vector3.new(
        math.floor(pos.X + 0.5),
        math.floor(pos.Y + 0.5),
        math.floor(pos.Z + 0.5)
    )
    local desc = string.format("â“** Island Position : ** X = %d, Y = %d, Z = %d â“\n", rPos.X, rPos.Y, rPos.Z)

    local time = os.time()
    desc = desc .. "ğŸ•› **Time Found : ** <t:" .. time .. ":f> ğŸ•› \n"

    desc = desc .. "ğŸ•› ** Despawn : **in " .. timer .. " ğŸ•›"

    local data = {
        ["content"] = "<@&1364568954437243013> | <@&" .. lTitle .. ">",
        ["embeds"] = {{
            ["title"] = "ğŸ€ " .. title .. " ğŸ€",
            ["description"] = desc,
            ["color"] = 16711680,
            ["thumbnail"] = {
                ["url"] = "https://static.wikia.nocookie.net/bgs-infinity/images/4/43/Nightmare_Egg.png/revision/latest?cb=20250412170032"
            }
        }}
    }

    httpRequest({
        Url = webhooklink,
        Method = "POST",
        Headers = {
            ["Content-Type"] = "application/json"
        },
        Body = httpService:JSONEncode(data)
    })
end

sendWebhook()
